<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux基础-08-文本三剑客 | Kinmfer's Blogs</title><meta name="keywords" content="Linux基础,系统"><meta name="author" content="Kinmfer,kinmfer@foxmail.com"><meta name="copyright" content="Kinmfer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="文本三剑客 grep：文本过滤(模式：pattern)工具grep, egrep, fgrep（不支持正则表达式搜索） sed：stream editor，文本编辑工具 awk：Linux上的实现gawk，文本报告生成器  grep介绍 grep: Global search REgular expression and Print out the line  作用：文本搜索工具，根据用户指定的“">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux基础-08-文本三剑客">
<meta property="og:url" content="https://kinmfer.github.io/2020/05/03/Linux%E5%9F%BA%E7%A1%80-08-%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/index.html">
<meta property="og:site_name" content="Kinmfer&#39;s Blogs">
<meta property="og:description" content="文本三剑客 grep：文本过滤(模式：pattern)工具grep, egrep, fgrep（不支持正则表达式搜索） sed：stream editor，文本编辑工具 awk：Linux上的实现gawk，文本报告生成器  grep介绍 grep: Global search REgular expression and Print out the line  作用：文本搜索工具，根据用户指定的“">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg">
<meta property="article:published_time" content="2020-05-03T12:05:25.000Z">
<meta property="article:modified_time" content="2021-03-06T07:15:55.820Z">
<meta property="article:author" content="Kinmfer">
<meta property="article:tag" content="Linux基础">
<meta property="article:tag" content="系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kinmfer.github.io/2020/05/03/Linux%E5%9F%BA%E7%A1%80-08-%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c46ed77365f502de73543fbf10399875";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"C2N62A47W9","apiKey":"0c62f17095ec2a20c19657511a42c0b1","indexName":"Blogs","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"这篇文章更新于","messageNext":"天前,内容可能已经过时"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: Kinmfer","link":"链接: ","source":"来源: Kinmfer's Blogs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-06 15:15:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">105</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">63</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kinmfer's Blogs</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux基础-08-文本三剑客</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-03T12:05:25.000Z" title="发表于 2020-05-03 20:05:25">2020-05-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-06T07:15:55.820Z" title="更新于 2021-03-06 15:15:55">2021-03-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux基础-08-文本三剑客"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/05/03/Linux%E5%9F%BA%E7%A1%80-08-%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2020/05/03/Linux%E5%9F%BA%E7%A1%80-08-%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="文本三剑客"><a href="#文本三剑客" class="headerlink" title="文本三剑客"></a>文本三剑客</h1><ul>
<li>grep：文本过滤(模式：pattern)工具<br>grep, egrep, fgrep（不支持正则表达式搜索）</li>
<li>sed：stream editor，文本编辑工具</li>
<li>awk：Linux上的实现gawk，文本报告生成器</li>
</ul>
<h1 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ul>
<li><p>grep: Global search REgular expression and Print out the line</p>
<ul>
<li>作用：文本搜索工具，根据用户指定的“模式”对目标文本逐行进行匹配检查；打印匹配到的行</li>
</ul>
</li>
<li><p>模式：由正则表达式字符及文本字符所编写的过滤条件</p>
</li>
<li><p>grep [OPTIONS] PATTERN [FILE…]</p>
<ul>
<li><code>grep root /etc/passwd</code></li>
<li><code>grep &quot;$USER&quot; /etc/passwd grep &#39;$USER&#39; /etc/passwd</code></li>
<li><code>grep $(whoami) /etc/passwd</code></li>
</ul>
</li>
</ul>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><ul>
<li><p>–color=auto: 对匹配到的文本着色显示</p>
</li>
<li><p>-m # 匹配#次后停止</p>
</li>
<li><p>-v 显示不被pattern匹配到的行</p>
</li>
<li><p>-i 忽略字符大小写</p>
</li>
<li><p>-n 显示匹配的行号</p>
</li>
<li><p>-c 统计匹配的行数</p>
</li>
<li><p>-o 仅显示匹配到的字符串</p>
</li>
<li><p>-q 静默模式，不输出任何信息</p>
</li>
<li><p>-A # after, 后#行</p>
</li>
<li><p>-B # before, 前#行</p>
</li>
<li><p>-C # context, 前后各#行</p>
</li>
<li><p>-e 实现多个选项间的逻辑or关系<br><code>grep –e &#39;cat&#39; -e &#39;dog&#39; file</code></p>
</li>
<li><p>-w 匹配整个单词</p>
</li>
<li><p>-E 使用egrep</p>
</li>
<li><p>-F 相当于fgrep，不支持正则表达式</p>
</li>
<li><p>-f file 根据模式文件处理</p>
</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>1.显示/proc/meminfo文件中以大小s开头的行（2种方式）<br><code>reg： ^[Ss]</code><br><code>grep &quot;^[Ss]&quot; /proc/meminfo </code><br><code>grep -i &quot;^s&quot; /proc/meminfo</code></p>
<p>2.显示/etc/passwd文件中不以/bin/bash结尾的行<br><code>reg:  /bin/bash$</code><br><code>grep -v &quot;/bin/bash$&quot; /etc/passwd </code></p>
<p>3.如果root用户存在，显示其默认的shell程序  位置锚定<br><code>[root@test tmp]# id root &gt; /dev/null &amp;&amp; grep &quot;^root\&gt;&quot; /etc/passwd | cut -d: -f7</code></p>
<p>4.找出/etc/passwd中的两位或三位数 ; 贪婪匹配 –&gt; 继续往后匹配<br><code>reg: [[:digit:]]\&#123;2,3\&#125;</code><br><code>[root@test tmp]# grep &quot;\&lt;[[:digit:]]\&#123;2,3\&#125;\&gt;&quot; /etc/passwd</code><br><code>[root@test tmp]# grep &quot;\&lt;[0-9]\&#123;2,3\&#125;\&gt;&quot; /etc/passwd</code><br><code>[root@test tmp]# grep -E &quot;\&lt;[0-9]&#123;2,3&#125;\&gt;&quot; /etc/passwd</code>        – 使用ERE</p>
<p>5.显示/etc/grub2.cfg文件中，至少以一个空白字符开头的且后面存非空白字符行<br><code>reg : ^[[:space:]]\+[^[:space:]]\+</code><br><code>[root@test tmp]# grep &quot;^[[:space:]]\+[^[:space:]]\+&quot; /etc/grub2.cfg</code></p>
<p>6.找出“netstat -tan”命令的结果中以’LISTEN’后跟0、1或多个空白字符结尾的行<br><code>reg:  LISTEN[[:space:]]*$</code><br><code>netstat -tan | grep &quot;LISTEN[[:space:]]*$&quot;</code></p>
<p>7.添加用户bash、testbash以及nologin（其shell为/sbin/nologin）,然后找出/etc/passwd文件中用户名同shell名的行<br><code>useradd bash &amp;&amp; useradd testbash &amp;&amp; useradd nologin -s /sbin/nologin</code><br><code>bash:x:1010:1013::/home/bash:/bin/bash</code><br><code>nologin:x:1012:1015::/home/nologin:/sbin/nologin</code><br><code>reg： [[:alnum:]]\+</code><br>扩展正则：<br><code>[root@test tmp]# grep -E &quot;^(\&lt;[[:alnum:]]+\&gt;).*\1$&quot; /etc/passwd</code><br>基本正则：<br><code>[root@test tmp]# grep &quot;^\(\&lt;[[:alnum:]]\+\&gt;\).*\1$&quot; /etc/passwd</code></p>
<p>\1 ： 引用分组的内容；保证用户名和shell同名 </p>
<h1 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h1><h2 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h2><ul>
<li>Stream EDitor, 行编辑器</li>
<li>sed是一种流编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环。如果没有使诸如‘D’的特殊命令，那会在两个循环之间清空模式空间，但不会清空保留空间。这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</li>
<li>功能：主要用来自动编辑一个或多个文件,简化对文件的反复操作,编写转换程序等</li>
<li>参考： <a target="_blank" rel="noopener" href="http://www.gnu.org/software/sed/manual/sed.html">http://www.gnu.org/software/sed/manual/sed.html</a></li>
</ul>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p><code>sed [option]... &#39;script&#39; inputfile...</code></p>
<ul>
<li><p>常用选项：</p>
<ul>
<li>-n 只打印匹配到的行</li>
<li>-e 多点编辑</li>
<li>-f  /PATH/SCRIPT_FILE 从指定文件中读取编辑脚本</li>
<li>-r 支持使用扩展正则表达式</li>
<li>-i.bak 备份文件并原处编辑</li>
</ul>
</li>
<li><p>script: </p>
<ul>
<li>‘地址命令’</li>
</ul>
</li>
<li><p>地址定界：</p>
<ul>
<li><p>不给地址：对全文进行处理</p>
</li>
<li><p>单地址：</p>
<ul>
<li><p>#：指定的行，$：最后一行</p>
</li>
<li><p>/pattern/：被此处模式所能够匹配到的每一行</p>
</li>
</ul>
</li>
<li><p>地址范围：</p>
<ul>
<li><p>x,y  从x行到y行</p>
</li>
<li><p>x;y  第x行和第y行</p>
</li>
<li><p>x,+y  x后y行</p>
</li>
<li><p>x,y! : 从x,y行之外</p>
</li>
<li><p>/pat1/,/pat2/   查询包含两个模式的行</p>
</li>
<li><p>#,/pat1/  #行后查询包含匹配模式的行</p>
</li>
<li><p>/pat1/,#  #行内查询包含匹配模式的行</p>
</li>
</ul>
</li>
<li><p>~：步进, 第一个数为起始行后一个数字为前进步数</p>
<ul>
<li>1~2 奇数行</li>
<li>2~2 偶数行</li>
</ul>
</li>
</ul>
</li>
<li><p>编辑命令：</p>
<ul>
<li>d 删除模式空间匹配的行，并立即启用下一轮循环</li>
<li>p 打印当前模式空间内容，追加到默认输出之后</li>
<li>a [\]text 在指定行后面追加文本，支持使用\n实现多行追加</li>
<li>i [\]text 在行前面插入文本</li>
<li>c [\]text 替换行为单行或多行文本</li>
<li>w /path/file 保存模式匹配的行至指定文件</li>
<li>r /path/file 读取指定文件的文本至模式空间中匹配到的行后</li>
<li>= 为模式空间中的行打印行号</li>
<li>! 模式空间中匹配行取反处理</li>
</ul>
</li>
<li><p>高级编辑命令：</p>
<ul>
<li>P： 打印模式空间开端至\n内容，并追加到默认输出之前</li>
<li>h: 把模式空间中的内容覆盖至保持空间中</li>
<li>H：把模式空间中的内容追加至保持空间中</li>
<li>g: 从保持空间取出数据覆盖至模式空间</li>
<li>G：从保持空间取出内容追加至模式空间</li>
<li>x: 把模式空间中的内容与保持空间中的内容进行互换</li>
<li>n: 读取匹配到的行的下一行覆盖至模式空间</li>
<li>N：读取匹配到的行的下一行追加至模式空间</li>
<li>D：如果模式空间包含换行符，则删除直到第一个换行符的模式空间中的文本，<br>并不会读取新的输入行，而使用合成的模式空间重新启动循环。如果模式空间<br>不包含换行符，则会像发出d命令那样启动正常的新循环</li>
<li>q： 第一个模式匹配后立即退出</li>
<li>{}: 在定位执行行的命令组，用;进行分隔</li>
</ul>
</li>
<li><p>s/// 查找替换,支持使用其它分隔符，s@@@，s###</p>
</li>
<li><p>替换标记：</p>
<ul>
<li>g 行内全局替换</li>
<li>p 显示替换成功的行</li>
<li>w /PATH/FILE 将替换成功的行保存至文件中</li>
</ul>
</li>
<li><p><strong>注意： -i 和 -n 不能一起使用</strong></p>
</li>
</ul>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><ul>
<li><p><code>sed ‘2p’ /etc/passwd</code> 显示/etc/passwd的第2行</p>
</li>
<li><p><code>sed -n ‘2p’ /etc/passwd</code>  不显示/etc/passwd的第2行</p>
</li>
<li><p><code>sed -n ‘1,4p’ /etc/passwd</code></p>
</li>
<li><p><code>sed -n ‘/root/p’ /etc/passwd</code></p>
</li>
<li><p><code>sed -n ‘2,/root/p’ /etc/passwd</code> 从2行开始</p>
</li>
<li><p><code>sed -n ‘/^$/=’ file</code> 显示空行行号</p>
</li>
<li><p><code>sed -n -e ‘/^\$/p’ -e ‘/^$/=’ file</code></p>
</li>
<li><p><code>sed‘/root/a\superman’ /etc/passwd</code>行后</p>
</li>
<li><p><code>sed ‘/root/i\superman’ /etc/passwd</code> 行前</p>
</li>
<li><p><code>sed ‘/root/c\superman’ /etc/passwd</code> 代替行</p>
</li>
<li><p><code>sed ‘/^$/d’  file</code></p>
</li>
<li><p><code>sed ‘1,10d’ file</code></p>
</li>
<li><p><code>nl /etc/passwd | sed ‘2,5d’</code></p>
</li>
<li><p><code>nl /etc/passwd | sed ‘2a tea’</code></p>
</li>
<li><p><code>sed &#39;s/test/mytest/g&#39; example</code></p>
</li>
<li><p><code>sed –n ‘s/root/&amp;superman/p’ /etc/passwd</code> 单词后</p>
</li>
<li><p><code>sed –n ‘s/root/superman&amp;/p’ /etc/passwd</code> 单词前</p>
</li>
<li><p><code>sed -e ‘s/dog/cat/’ -e ‘s/hi/lo/’ pets </code></p>
</li>
<li><p><code>sed –i.bak ‘s/dog/cat/g’ pets</code></p>
</li>
<li><p><code>sed -n &#39;n;p&#39; FILE</code></p>
</li>
<li><p><code>sed &#39;1!G;h;\$!d&#39; FILE</code></p>
</li>
<li><p><code>sed ‘N;D’FILE</code></p>
</li>
<li><p><code>sed &#39;$!N;$!D&#39; FILE</code></p>
</li>
<li><p><code>sed &#39;$!d&#39; FILE</code></p>
</li>
<li><p><code>sed ‘G’ FILE</code></p>
</li>
<li><p><code>sed ‘g’ FILE</code></p>
</li>
<li><p><code>sed ‘/^$/d;G’ FILE</code></p>
</li>
<li><p><code>sed &#39;n;d&#39; FILE </code></p>
</li>
<li><p><code>sed -n &#39;1!G;h;$p&#39; FILE</code></p>
</li>
<li><p><code>ls test*.txt|sed -r &#39;s#(.*)txt#mv &amp; \1jpg#g&#39;</code></p>
</li>
<li><p>只打印文本的第1到4行内容<br><code>[root@test tmp]# sed -n &#39;1,4p&#39; fstab</code>         </p>
</li>
<li><p>只打印文本中包含xfs的行<br><code>[root@test tmp]# sed -n &#39;/xfs/p&#39; fstab</code>    </p>
</li>
<li><p>只打印文本中以UUID开头的行<br><code>[root@test tmp]# sed -n &#39;/^UUID=.*/p&#39; fstab</code>     </p>
</li>
<li><p>显示文件中以UUID开头行的行号<br><code>[root@test tmp]# sed -n &#39;/^UUID=.*/=&#39; fstab</code> </p>
</li>
<li><p>在/etc/hosts文件中第3行位置添加主机名解析内容<br><code>[root@test tmp]# sed -i &#39;2a\192.168.10.10 node1&#39; /etc/hosts</code></p>
</li>
<li><p>删除上述添加的解析内容<br><code>[root@test tmp]# sed -i &#39;3d&#39; /etc/hosts</code></p>
</li>
<li><p>替换以UUID开头行的内容<br><code>[root@test tmp]# sed -i &#39;/^UUID=.*/c\test......&#39; fstab</code></p>
</li>
<li><p>将fstab文件中以#开头的所有内容保存至fstab_part文件中<br><code>[root@test tmp]# sed &#39;/^#.*/w fstab_part&#39; fstab</code></p>
</li>
<li><p>将fstab_part文件内容读写到1.txt文件中第2行以后位置<br><code>[root@test tmp]# sed -i &#39;2r fstab_part&#39; 1.txt</code> </p>
</li>
<li><p>将1.txt文本中hello替换成全局替换成大写<br><code>[root@test tmp]# sed -i &#39;s/hello/HELLO/g&#39; 1.txt </code></p>
</li>
<li><p>将替换的内容保存至1_part.txt文本中<br><code>[root@test tmp]# sed &#39;s/HELLO/Hi/g w 1_part.txt&#39; 1.txt</code></p>
</li>
<li><p>显示/etc/passwd文件中位于第偶数行的用户的用户名<br><code>sed -n &#39;n;p&#39; /etc/passwd | cut -d: -f1</code></p>
</li>
<li><p>为/tmp/1.txt 文件中前三行的行首加#号。<br><code>sed -i &#39;1,3s@\(^.\)@#\1@g&#39; /tmp/grub.conf</code><br><code>1,3s@\(^.\)@#\1@g</code><br><code>sed  &quot;1,3s/(.*)/#\1/&quot;</code> </p>
</li>
<li><p>取消注释行：<br><code>sed &#39;1,10s@^#\(.*\)$@\1@g&#39; 1.txt </code></p>
<p>^#+(.*)$ —&gt; 查询内容：所有#开头的行</p>
<p>\1 替换的内容 (.*)</p>
</li>
</ul>
<h1 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h1><h2 id="awk介绍"><a href="#awk介绍" class="headerlink" title="awk介绍"></a>awk介绍</h2><ul>
<li>awk：Aho, Weinberger, Kernighan，报告生成器，格式化文本输出</li>
<li>有多种版本：New awk（nawk），GNU awk（ gawk）</li>
<li>gawk：模式扫描和处理语言</li>
<li>基本用法：<ul>
<li>awk [options]  ‘program’ var=value file…</li>
<li>awk [options]  -f programfile var=value file…</li>
<li>awk [options] ‘BEGIN{action;… }pattern{action;… }END{action;… }’ file …</li>
<li>awk 程序可由：BEGIN语句块、能够使用模式匹配的通用语句块、END语句块，共3部分组成</li>
<li>program 通常是被放在单引号中</li>
</ul>
</li>
<li>选项：<ul>
<li>-F “分隔符” 指明输入时用到的字段分隔符</li>
<li>-v var=value 变量赋值</li>
</ul>
</li>
</ul>
<h2 id="awk语言"><a href="#awk语言" class="headerlink" title="awk语言"></a>awk语言</h2><ul>
<li>基本格式：awk [options] ‘program’ file…</li>
<li>Program：pattern{action statements;..}</li>
<li>pattern和action<ul>
<li>pattern部分决定动作语句何时触发及触发事件<br>BEGIN,END</li>
<li>action statements对数据进行处理，放在{}内指明<br>print, printf</li>
</ul>
</li>
<li>分割符、域和记录<ul>
<li>awk执行时，由分隔符分隔的字段（域）标记$1,$2…$n称为域标识。$0为所有域，注意：此时和shell中变量$符含义不同</li>
<li>文件的每一行称为记录</li>
<li>省略action，则默认执行 print $0 的操作</li>
</ul>
</li>
</ul>
<h2 id="awk工作原理"><a href="#awk工作原理" class="headerlink" title="awk工作原理"></a>awk工作原理</h2><ul>
<li>第一步：执行BEGIN{action;… }语句块中的语句</li>
<li>第二步：从文件或标准输入(stdin)读取一行，然后执行pattern{ action;… }语句块，它逐行扫描文件，从第一行到最后一行重复这个过程，直到文件全部被读取完毕。</li>
<li>第三步：当读至输入流末尾时，执行END{action;…}语句块</li>
<li>BEGIN语句块在awk开始从输入流中读取行之前被执行，这是一个可选的语句块，比如变量初始化、打印输出表格的表头等语句通常可以写在BEGIN语句块中</li>
<li>END语句块在awk从输入流中读取完所有的行之后即被执行，比如打印所有行的分析结果这类信息汇总都是在END语句块中完成，它也是一个可选语句块</li>
<li>pattern语句块中的通用命令是最重要的部分，也是可选的。如果没有提供pattern语句块，则默认执行{ print }，即打印每一个读取到的行，awk读取的每一行都会执行该语句块</li>
</ul>
<h2 id="awk变量"><a href="#awk变量" class="headerlink" title="awk变量"></a>awk变量</h2><ul>
<li>变量：内置和自定义变量</li>
<li>自定义变量(区分字符大小写)<ul>
<li>-v var=value</li>
<li>在program中直接定义</li>
</ul>
</li>
<li>FS：输入字段分隔符，默认为空白字符<ul>
<li><code>awk -v FS=&#39;:&#39; &#39;&#123;print $1,FS,$3&#125;’ /etc/passwd</code></li>
<li><code>awk –F: &#39;&#123;print $1,$3,$7&#125;’ /etc/passwd</code></li>
</ul>
</li>
<li>OFS：输出字段分隔符，默认为空白字符<ul>
<li><code>awk -v FS=‘:’ -v OFS=‘:’ &#39;&#123;print $1,$3,$7&#125;’ /etc/passwd</code></li>
</ul>
</li>
<li>RS：输入记录分隔符，指定输入时的换行符<ul>
<li><code>awk -v RS=&#39; &#39; ‘&#123;print &#125;’ /etc/passwd</code></li>
</ul>
</li>
<li>ORS：输出记录分隔符，输出时用指定符号代替换行符<ul>
<li><code>awk -v RS=&#39; &#39; -v ORS=&#39;###&#39;‘&#123;print &#125;’ /etc/passwd</code></li>
</ul>
</li>
<li>NF：字段数量(列)<ul>
<li><code>awk -F：‘&#123;print NF&#125;’ /etc/fstab</code> 引用变量时，变量前不需加$</li>
<li><code>awk -F：‘&#123;print $(NF-1)&#125;&#39; /etc/passwd</code></li>
</ul>
</li>
<li>NR：记录号(行)<ul>
<li><code>awk ‘&#123;print NR&#125;’ /etc/fstab ; awk END‘&#123;print NR&#125;’ /etc/fstab</code></li>
</ul>
</li>
<li>FNR：各文件分别计数,记录号<ul>
<li><code>awk &#39;&#123;print FNR&#125;&#39; /etc/fstab /etc/inittab</code></li>
</ul>
</li>
<li>FILENAME：当前文件名<ul>
<li><code>awk &#39;&#123;print FILENAME&#125;’ /etc/fstab</code></li>
</ul>
</li>
<li>ARGC：命令行参数的个数<ul>
<li><code>awk &#39;&#123;print ARGC&#125;’ /etc/fstab /etc/inittab</code></li>
<li><code>awk ‘BEGIN &#123;print ARGC&#125;’ /etc/fstab /etc/inittab</code></li>
</ul>
</li>
<li>ARGV：数组，保存的是命令行所给定的各参数<ul>
<li><code>awk ‘BEGIN &#123;print ARGV[0]&#125;’ /etc/fstab /etc/inittab</code></li>
<li><code>awk ‘BEGIN &#123;print ARGV[1]&#125;’ /etc/fstab /etc/inittab</code></li>
</ul>
</li>
<li>示例：<ul>
<li><code>awk -v test=&#39;hello gawk&#39; &#39;&#123;print test&#125;&#39; /etc/fstab</code></li>
<li><code>awk -v test=&#39;hello gawk&#39; &#39;BEGIN&#123;print test&#125;&#39; </code></li>
<li><code>awk &#39;BEGIN&#123;test=&quot;hello,gawk&quot;;print test&#125;&#39; </code></li>
<li><code>awk -F:‘&#123;sex=“male”;print $1,sex,age;age=18&#125;’ /etc/passwd cat awkscript &#123;print script,$1,$2&#125;</code></li>
<li><code>awk -F: -f awkscript script=“awk” /etc/passwd</code></li>
</ul>
</li>
</ul>
<h2 id="print-amp-printf命令"><a href="#print-amp-printf命令" class="headerlink" title="print&amp;printf命令"></a>print&amp;printf命令</h2><ul>
<li>print格式：print item1, item2, …</li>
<li>要点：<br>(1) 逗号分隔符<br>(2) 输出item可以字符串，也可是数值；当前记录的字段、变量或awk的表达式<br>(3) 如省略item，相当于print $0</li>
<li>示例：<ul>
<li><code>awk &#39;&#123;print &quot;hello,awk&quot;&#125;&#39;</code></li>
<li><code>awk –F: &#39;&#123;print&#125;&#39; /etc/passwd</code></li>
<li><code>awk –F: ‘&#123;print “kong”&#125;’ /etc/passwd</code></li>
<li><code>awk –F: ‘&#123;print $1&#125;’ /etc/passwd</code></li>
<li><code>awk –F: ‘&#123;print $0&#125;’ /etc/passwd</code></li>
<li><code>awk –F: ‘&#123;print $1”\t”$3&#125;’ /etc/passwd</code></li>
<li><code>grep “^UUID”/etc/fstab| awk ‘&#123;print $2,$4&#125;’</code></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>格式化输出：printf “FORMAT”, item1, item2, …<br>(1) 必须指定FORMAT<br>(2) 不会自动换行，需要显式给出换行控制符，\n<br>(3) FORMAT中需要分别为后面每个item指定格式符</p>
</li>
<li><p>格式符：与item一一对应</p>
<ul>
<li>%c：显示字符的ASCII码</li>
<li>%d, %i：显示十进制整数</li>
<li>%e, %E：显示科学计数法数值</li>
<li>%f：显示为浮点数</li>
<li>%g, %G：以科学计数法或浮点形式显示数值</li>
<li>%s：显示字符串</li>
<li>%u：无符号整数</li>
<li>%%：显示%自身</li>
</ul>
</li>
<li><p>修饰符</p>
<ul>
<li>#[.#] 第一个数字控制显示的宽度；第二个#表示小数点后精度，%3.1f</li>
<li>-  左对齐（默认右对齐） %-15s</li>
<li>+ 显示数值的正负符号 %+d</li>
</ul>
</li>
<li><p>示例</p>
<ul>
<li><code>awk -F: ‘&#123;printf &quot;%s&quot;,$1&#125;’ /etc/passwd</code></li>
<li><code>awk -F: ‘&#123;printf &quot;%s\n&quot;,$1&#125;’ /etc/passwd</code></li>
<li><code>awk -F: &#39;&#123;printf &quot;%-20s %10d\n&quot;,$1,$3&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F:‘ &#123;printf &quot;Username: %s\n&quot;,$1&#125;’ /etc/passwd</code></li>
<li><code>awk -F: ‘&#123;printf “Username: %s,UID:%d\n&quot;,$1,$3&#125;’ /etc/passwd</code></li>
<li><code>awk -F: ‘&#123;printf &quot;Username: %15s,UID:%d\n&quot;,$1,$3&#125;’ /etc/passwd</code></li>
<li><code>awk -F: ‘&#123;printf &quot;Username: %-15s,UID:%d\n&quot;,$1,$3&#125;’/etc/passwd</code></li>
</ul>
</li>
</ul>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><ul>
<li><p>算术操作符：</p>
<ul>
<li>x+y, x-y, x*y, x/y, x^y, x%y</li>
<li>-x：转换为负数</li>
<li>+x：将字符串转换为数值</li>
</ul>
</li>
<li><p>字符串操作符：没有符号的操作符，字符串连接</p>
</li>
<li><p>赋值操作符：<br>=, +=, -=, *=, /=, %=, ^=，++, –</p>
</li>
<li><p>比较操作符：<br>==, !=, &gt;, &gt;=, &lt;, &lt;=</p>
</li>
<li><p>模式匹配符：</p>
<ul>
<li>~：左边是否和右边匹配，包含</li>
<li>!~：是否不匹配</li>
<li>示例：<ul>
<li><code>awk -F: &#39;$0 ~ /root/&#123;print $1&#125;‘ /etc/passwd</code></li>
<li><code>awk &#39;$0~“^root&quot;&#39;  /etc/passwd</code></li>
<li><code>awk &#39;$0 !~ /root/‘ /etc/passwd</code></li>
<li><code>awk -F: ‘$3==0’  /etc/passwd</code></li>
</ul>
</li>
</ul>
</li>
<li><p>逻辑操作符：与&amp;&amp;，或||，非!<br>示例：</p>
<ul>
<li><code>awk -F: &#39;$3&gt;=0 &amp;&amp; $3&lt;=1000 &#123;print $1&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: &#39;$3==0 || $3&gt;=1000 &#123;print $1&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: ‘!($3==0) &#123;print $1&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: ‘!($3&gt;=500) &#123;print $3&#125;’ /etc/passwd</code></li>
</ul>
</li>
<li><p>条件表达式（三目表达式）</p>
<p>selector?if-true-expression:if-false-expression<br>示例：</p>
<p><code>awk -F: &#39;&#123;$3&gt;=1000?usertype=&quot;Common User&quot;:usertype=&quot; SysUser&quot;;printf &quot;%15s:%-s\n&quot;,$1,usertype&#125;&#39; /etc/passwd</code></p>
</li>
</ul>
<h2 id="awk-PATTERN"><a href="#awk-PATTERN" class="headerlink" title="awk PATTERN"></a>awk PATTERN</h2><ul>
<li><p>PATTERN:根据pattern条件，过滤匹配的行，再做处理</p>
<p>(1)如果未指定：空模式，匹配每一行</p>
<p>(2) /regular expression/：仅处理能够模式匹配到的行，需要用/ /括起来</p>
<ul>
<li><code>awk&#39;/^UUID/&#123;print $1&#125;&#39; /etc/fstab</code></li>
<li><code>awk&#39;!/^UUID/&#123;print $1&#125;&#39; /etc/fstab</code></li>
</ul>
<p>(3) relational expression: 关系表达式，结果为“真”才会被处理</p>
<ul>
<li><p>真：结果为非0值，非空字符串</p>
</li>
<li><p>假：结果为空字符串或0值</p>
<p>示例：</p>
<ul>
<li><code>awk -F: &#39;i=1;j=1&#123;print i,j&#125;&#39; /etc/passwd</code></li>
<li><code>awk ‘!0’ /etc/passwd ; awk‘!1’ /etc/passwd</code></li>
<li><code>awk -F: &#39;$3&gt;=1000&#123;print $1,$3&#125;&#39; /etc/passwd</code></li>
<li><code>awk-F: &#39;$3&lt;1000&#123;print $1,$3&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: &#39;$NF==&quot;/bin/bash&quot;&#123;print $1,$NF&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: &#39;$NF ~ /bash$/&#123;print $1,$NF&#125;&#39; /etc/passwd</code></li>
</ul>
</li>
</ul>
<p>(4) line ranges：行范围</p>
<ul>
<li>startline,endline：/pat1/,/pat2/ 不支持直接给出数字格式</li>
<li><code>awk -F: ‘/^root\&gt;/,/^nobody\&gt;/&#123;print $1&#125;&#39; /etc/passwd</code></li>
<li><code>awk -F: ‘(NR&gt;=10&amp;&amp;NR&lt;=20)&#123;print NR,$1&#125;&#39; /etc/passwd</code></li>
</ul>
<p>(5) BEGIN/END模式</p>
<ul>
<li><p>BEGIN{}：仅在开始处理文件中的文本之前执行一次</p>
</li>
<li><p>END{}：仅在文本处理完成之后执行一次</p>
<p>示例：</p>
<ul>
<li><p><code>awk -F : ‘BEGIN &#123;print “USER USERID”&#125; &#123;print $1“:”$3&#125; END&#123;print “END FILE&quot;&#125;&#39; /etc/passwd</code></p>
</li>
<li><p><code>awk -F : &#39;&#123;print &quot;USER USERID“;print $1&quot;:&quot;$3&#125; END&#123;print &quot;END FILE&quot;&#125;&#39; /etc/passwd</code></p>
</li>
<li><p><code>awk -F: &#39;BEGIN&#123;print &quot; USER UID \n--------------- &quot;&#125;&#123;print $1,$3&#125;&#39; /etc/passwd</code></p>
</li>
<li><p><code>awk -F: ‘BEGIN&#123;print “ USER UID \n--------------- ”&#125;&#123;print $1,$3&#125;’END&#123;print “==============”&#125; /etc/passwd</code></p>
</li>
<li><p><code>seq 10 | awk  &#39;i=0&#39;</code></p>
</li>
<li><p><code>seq 10 | awk &#39;i=1&#39;</code></p>
</li>
<li><p><code>seq 10 | awk &#39;i=!i&#39;</code></p>
</li>
<li><p><code>seq 10 | awk&#39;&#123;i=!i;print i&#125;&#39;</code></p>
</li>
<li><p><code>seq 10 | awk‘!(i=!i)&#39;</code></p>
</li>
<li><p><code>seq 10 | awk-v i=1 &#39;i=!i&#39;</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="awk-action"><a href="#awk-action" class="headerlink" title="awk action"></a>awk action</h2><ul>
<li><p>常用的action分类</p>
<p>(1) Expressions：算术，比较表达式等</p>
<p>(2) Control statements：if, while等</p>
<p>(3) Compound statements：组合语句</p>
<p>(4) input statements</p>
<p>(5) output statements：print等</p>
</li>
</ul>
<p>更多请参看<a target="_blank" rel="noopener" href="https://www.runoob.com/w3cnote/awk-built-in-functions.html#b2">https://www.runoob.com/w3cnote/awk-built-in-functions.html#b2</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:kinmfer@foxmail.com">Kinmfer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kinmfer.github.io/2020/05/03/Linux%E5%9F%BA%E7%A1%80-08-%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/">https://kinmfer.github.io/2020/05/03/Linux基础-08-文本三剑客/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://Kinmfer.github.io" target="_blank">Kinmfer's Blogs</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux%E5%9F%BA%E7%A1%80/">Linux基础</a><a class="post-meta__tags" href="/tags/%E7%B3%BB%E7%BB%9F/">系统</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/05/03/Linux%E5%9F%BA%E7%A1%80-09-%E8%BF%9B%E7%A8%8B+%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/"><img class="prev-cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux基础-09-进程+计划任务</div></div></a></div><div class="next-post pull-right"><a href="/2020/05/03/Linux%E5%9F%BA%E7%A1%80-07-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86+%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><img class="next-cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux基础-07-文本处理+正则表达式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/05/02/Linux基础-03-IO重定向+管道/" title="Linux基础-03-IO重定向+管道"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-02</div><div class="title">Linux基础-03-IO重定向+管道</div></div></a></div><div><a href="/2020/05/03/Linux基础-06-vim/" title="Linux基础-06-vim"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-03</div><div class="title">Linux基础-06-vim</div></div></a></div><div><a href="/2020/05/03/Linux基础-07-文本处理+正则表达式/" title="Linux基础-07-文本处理+正则表达式"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-03</div><div class="title">Linux基础-07-文本处理+正则表达式</div></div></a></div><div><a href="/2020/05/04/Linux基础-13-CentOS7启动流程+Systemd管理/" title="Linux基础-13-CentOS7启动流程+Systemd管理"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-04</div><div class="title">Linux基础-13-CentOS7启动流程+Systemd管理</div></div></a></div><div><a href="/2020/05/03/Linux基础-05-文件管理/" title="Linux基础-05-文件管理"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-03</div><div class="title">Linux基础-05-文件管理</div></div></a></div><div><a href="/2020/05/03/Linux基础-04-用户组+权限管理/" title="Linux基础-04-用户组+权限管理"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-03</div><div class="title">Linux基础-04-用户组+权限管理</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Livere</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="lv-container" data-id="city" data-uid="MTAyMC81MTkzMi8yODQxMw=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kinmfer</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">105</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">63</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Kinmfer"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Kinmfer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:kinmfer@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！本博客用于记录一些学习过程中的文章，包括原创，也包括转录其他大神的博客。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2"><span class="toc-number">1.</span> <span class="toc-text">文本三剑客</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#grep"><span class="toc-number">2.</span> <span class="toc-text">grep</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E9%A1%B9"><span class="toc-number">2.2.</span> <span class="toc-text">选项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.3.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sed"><span class="toc-number">3.</span> <span class="toc-text">sed</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">3.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">3.3.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#awk"><span class="toc-number">4.</span> <span class="toc-text">awk</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#awk%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.1.</span> <span class="toc-text">awk介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk%E8%AF%AD%E8%A8%80"><span class="toc-number">4.2.</span> <span class="toc-text">awk语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">4.3.</span> <span class="toc-text">awk工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk%E5%8F%98%E9%87%8F"><span class="toc-number">4.4.</span> <span class="toc-text">awk变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#print-amp-printf%E5%91%BD%E4%BB%A4"><span class="toc-number">4.5.</span> <span class="toc-text">print&amp;printf命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.6.</span> <span class="toc-text">操作符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk-PATTERN"><span class="toc-number">4.7.</span> <span class="toc-text">awk PATTERN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk-action"><span class="toc-number">4.8.</span> <span class="toc-text">awk action</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/05/03/%E6%8A%80%E5%B7%A7-02-%E4%B8%8B%E8%BD%BDgcr%E9%95%9C%E5%83%8F/" title="技巧-02-下载gcr镜像"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/gcr.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="技巧-02-下载gcr镜像"/></a><div class="content"><a class="title" href="/2021/05/03/%E6%8A%80%E5%B7%A7-02-%E4%B8%8B%E8%BD%BDgcr%E9%95%9C%E5%83%8F/" title="技巧-02-下载gcr镜像">技巧-02-下载gcr镜像</a><time datetime="2021-05-03T06:42:06.000Z" title="发表于 2021-05-03 14:42:06">2021-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84-Prometheus-PromeQL/" title="综合架构-Prometheus-PromQL"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/prometheus.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="综合架构-Prometheus-PromQL"/></a><div class="content"><a class="title" href="/2021/04/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84-Prometheus-PromeQL/" title="综合架构-Prometheus-PromQL">综合架构-Prometheus-PromQL</a><time datetime="2021-04-29T08:03:41.000Z" title="发表于 2021-04-29 16:03:41">2021-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/22/%E4%BA%91%E8%AE%A1%E7%AE%97-Kubernetes-%E5%8D%87%E7%BA%A7/" title="云计算-Kubernetes-升级"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/k8s-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算-Kubernetes-升级"/></a><div class="content"><a class="title" href="/2021/04/22/%E4%BA%91%E8%AE%A1%E7%AE%97-Kubernetes-%E5%8D%87%E7%BA%A7/" title="云计算-Kubernetes-升级">云计算-Kubernetes-升级</a><time datetime="2021-04-22T07:02:41.000Z" title="发表于 2021-04-22 15:02:41">2021-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/04/GOLANG-16-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="GOLANG-16-网络编程"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-16-网络编程"/></a><div class="content"><a class="title" href="/2021/02/04/GOLANG-16-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="GOLANG-16-网络编程">GOLANG-16-网络编程</a><time datetime="2021-02-04T12:10:02.000Z" title="发表于 2021-02-04 20:10:02">2021-02-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/03/GOLANG-15-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="GOLANG-15-单元测试"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-15-单元测试"/></a><div class="content"><a class="title" href="/2021/02/03/GOLANG-15-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="GOLANG-15-单元测试">GOLANG-15-单元测试</a><time datetime="2021-02-03T12:28:06.000Z" title="发表于 2021-02-03 20:28:06">2021-02-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/Kinmfer/BlogImages/raw/master/img/1soSr8.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Kinmfer</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://kinmfer.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'vSKb5nQqvUv44yjbvGjUmk3E-gzGzoHsz',
      appKey: '4TRbJGECRE8pcN777qgBXsKO',
      placeholder: '记得留下你的昵称和邮箱,可以快速收到回复哦~',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_����":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_͵Ц":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_�ټ�":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_��Į":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_��ŭ":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_�ɰ�":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_��Ѫ":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_��":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_Ż��":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_��Ц":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_���":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_ί��":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_΢Ц":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_˼��":"90cf159733e558137ed20aa04d09964436f618a1.png"},
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Valine' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script src="//code.tidio.co/mzqu2o1lbhle9bvhab8bexgtiyxgkheb.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>