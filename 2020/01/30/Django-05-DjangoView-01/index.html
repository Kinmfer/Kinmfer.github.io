<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django-05-DjangoView-01 | Kinmfer's Blogs</title><meta name="keywords" content="Django,Web框架,后端"><meta name="author" content="Kinmfer,kinmfer@foxmail.com"><meta name="copyright" content="Kinmfer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="视图概述 Django中的视图主要用来接受Web请求，并做出响应。  视图的本质就是一个Python中的函数  视图的响应分为两大类  以json数据形势返回 以网页的形势返回 重定向到另一个网页 错误视图(40X,50X)     视图响应过程:浏览器输入-&gt; django获取信息并去掉ip:端口，剩下路径-&gt; urls路由匹配-&gt;视图响应-&gt;回馈到浏览器   url配置">
<meta property="og:type" content="article">
<meta property="og:title" content="Django-05-DjangoView-01">
<meta property="og:url" content="https://kinmfer.github.io/2020/01/30/Django-05-DjangoView-01/index.html">
<meta property="og:site_name" content="Kinmfer&#39;s Blogs">
<meta property="og:description" content="视图概述 Django中的视图主要用来接受Web请求，并做出响应。  视图的本质就是一个Python中的函数  视图的响应分为两大类  以json数据形势返回 以网页的形势返回 重定向到另一个网页 错误视图(40X,50X)     视图响应过程:浏览器输入-&gt; django获取信息并去掉ip:端口，剩下路径-&gt; urls路由匹配-&gt;视图响应-&gt;回馈到浏览器   url配置">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png">
<meta property="article:published_time" content="2020-01-30T09:12:02.000Z">
<meta property="article:modified_time" content="2020-05-26T06:59:04.969Z">
<meta property="article:author" content="Kinmfer">
<meta property="article:tag" content="Django">
<meta property="article:tag" content="Web框架">
<meta property="article:tag" content="后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kinmfer.github.io/2020/01/30/Django-05-DjangoView-01/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c46ed77365f502de73543fbf10399875";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"C2N62A47W9","apiKey":"0c62f17095ec2a20c19657511a42c0b1","indexName":"Blogs","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"这篇文章更新于","messageNext":"天前,内容可能已经过时"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: Kinmfer","link":"链接: ","source":"来源: Kinmfer's Blogs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-05-26 14:59:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = '1  Following System Settings, if the system doesn't support dark mode, it will switch dark mode between 6 pm to 6 am'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">91</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">47</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kinmfer's Blogs</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Django-05-DjangoView-01</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-01-30T09:12:02.000Z" title="发表于 2020-01-30 17:12:02">2020-01-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-26T06:59:04.969Z" title="更新于 2020-05-26 14:59:04">2020-05-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/Django/">Django</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>19分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/01/30/Django-05-DjangoView-01/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2020/01/30/Django-05-DjangoView-01/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="视图概述"><a href="#视图概述" class="headerlink" title="视图概述"></a>视图概述</h1><ul>
<li><p>Django中的视图主要用来接受Web请求，并做出响应。</p>
</li>
<li><p>视图的本质就是一个Python中的函数</p>
</li>
<li><p>视图的响应分为两大类</p>
<ul>
<li>以json数据形势返回</li>
<li>以网页的形势返回<ul>
<li>重定向到另一个网页</li>
<li>错误视图(40X,50X)</li>
</ul>
</li>
</ul>
</li>
<li><p>视图响应过程:浏览器输入-&gt; django获取信息并去掉ip:端口，剩下路<br>径-&gt; urls路由匹配-&gt;视图响应-&gt;回馈到浏览器</p>
</li>
</ul>
<h1 id="url配置"><a href="#url配置" class="headerlink" title="url配置"></a>url配置</h1><h2 id="配置流程"><a href="#配置流程" class="headerlink" title="配置流程"></a>配置流程</h2><p>setting中指定根级url配置文件，对应的属性ROOT_ URLCONF</p>
<p>urlpatterns: 一个url实例的列表，全在根配置搞定</p>
<p>内部由url组成(正则匹配路径)<br>path (‘Learn/‘,views.learn)</p>
<p>即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    path(正则表达式, views视图函数，参数，别名),</span><br><span class="line">]</span><br><span class="line">参数说明：</span><br><span class="line">1、一个正则表达式字符串</span><br><span class="line">2、一个可调用对象，通常为一个视图函数或一个指定视图函数路径的字符串</span><br><span class="line">3、可选的要传递给视图函数的默认参数（字典形式）</span><br><span class="line">4、一个可选的name参数(别名)</span><br></pre></td></tr></table></figure>
<p>导入其它url配置:<br>在应用中 创建urls.py文件,编写匹配规则，在工程urls.py中进行</p>
<p>导入包含</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> include</span><br><span class="line">urlpatterns = [ path(<span class="string">&#x27;xxx/&#x27;</span>) ,include(<span class="string">&#x27;Appurls&#x27;</span>)]</span><br></pre></td></tr></table></figure>
<h1 id="获取url路径上的参数"><a href="#获取url路径上的参数" class="headerlink" title="获取url路径上的参数"></a>获取url路径上的参数</h1><p>下面是一个简单的URLconf例子:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;articles/2003/&#x27;</span>, views.special_case_2003),</span><br><span class="line">    path(<span class="string">&#x27;articles/&lt;int:year&gt;/&#x27;</span>, views.year_archive),</span><br><span class="line">    path(<span class="string">&#x27;articles/&lt;int:year&gt;/&lt;int:month&gt;/&#x27;</span>, views.month_archive),</span><br><span class="line">    path(<span class="string">&#x27;articles/&lt;int:year&gt;/&lt;int:month&gt;/&lt;slug:slug&gt;/&#x27;</span>, views.article_detail),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
<h2 id="url匹配注意事项"><a href="#url匹配注意事项" class="headerlink" title="url匹配注意事项"></a>url匹配注意事项</h2><ol>
<li>要捕获一段url中的值，需要使用尖括号，而不是之前的圆括号；</li>
<li>可以转换捕获到的值为指定类型，比如例子中的。默认情况下，捕获到的结果保存为字符串类型，不包含**<code>/</code>**这个特殊字符；</li>
<li>规则的前面不需要添加**<code>/</code><strong>，因为默认情况下，每个url都带一个最前面的</strong><code>/</code>**。比如：articles, 不能写成 /articles。</li>
</ol>
<h2 id="匹配例子"><a href="#匹配例子" class="headerlink" title="匹配例子"></a>匹配例子</h2><p>1、/articles/2005/03/ 将匹配第三条，并调用views.month_archive(request, year=2005, month=3)；</p>
<p>2、/articles/2003/匹配第一条，并调用views.special_case_2003(request)；</p>
<p>3、/articles/2003将一条都匹配不上，因为它最后少了一个斜杠，而列表中的所有模式中都以斜杠结尾；</p>
<p>4、/articles/2003/03/building-a-django-site/ 将匹配最后一个，并调用views.article_detail(request, year=2003, month=3, slug=”building-a-django-site”)</p>
<h2 id="path转换器"><a href="#path转换器" class="headerlink" title="path转换器"></a>path转换器</h2><p>Django默认情况下内置下面的路径转换器：</p>
<p>1、str：匹配任何非空字符串，但不含斜杠/，如果你没有专门指定转换器，那么这个是默认使用的；<br>2、int：匹配0和正整数，返回一个int类型<br>3、slug：可理解为注释、后缀、附属等概念，是url拖在最后的一部分解释性字符。该转换器匹配任何ASCII字符以及连接符和下划线，比如’ building-your-1st-django-site‘；<br>4、uuid：匹配一个uuid格式的对象。为了防止冲突，规定必须使用破折号，所有字母必须小写，例如’075194d3-6885-417e-a8a8-6c931e272f00‘ 。返回一个UUID对象；<br>5、path：匹配任何非空字符串，重点是可以包含路径分隔符’/‘。这个转换器可以帮助你匹配整个url而不是一段一段的url字符串。</p>
<h2 id="注册自定义路径转换器"><a href="#注册自定义路径转换器" class="headerlink" title="注册自定义路径转换器"></a>注册自定义路径转换器</h2><p>对于更复杂的匹配需求，您可以定义自己的路径转换器。自定义，就是单独写一个类，它包含下面的内容：<br>1、类属性regex：一个字符串形式的正则表达式属性；<br>2、to_python(self, value) 方法：一个用来将匹配到的字符串转换为你想要的那个数据类型，并传递给视图函数。如果不能转换给定的值，则会引发ValueError。</p>
<p>3、to_url(self, value)方法：将Python数据类型转换为一段url的方法，上面方法的反向操作。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FourDigitYearConverter</span>:</span></span><br><span class="line">    regex = <span class="string">&#x27;[0-9]&#123;4&#125;&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">to_python</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>(value)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">to_url</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;%04d&#x27;</span> % value</span><br></pre></td></tr></table></figure>
<p>在URLconf中注册自定义转换器类，并使用它:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, register_converter</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> converters, </span><br><span class="line">viewsregister_converter(converters.FourDigitYearConverter, <span class="string">&#x27;yyyy&#x27;</span>)</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;articles/2003/&#x27;</span>, views.special_case_2003),</span><br><span class="line">    path(<span class="string">&#x27;articles/&lt;yyyy:year&gt;/&#x27;</span>, views.year_archive),</span><br><span class="line">    ...</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>


<h2 id="使用正则表达式"><a href="#使用正则表达式" class="headerlink" title="使用正则表达式"></a>使用正则表达式</h2><p>如果路径和转换器语法不足以定义URL模式，也可以使用正则表达式。这时我们就需要使用re_path()而不是path()。</p>
<p>在Python正则表达式中，命名正则表达式组的语法是 (?P<name>pattern)，其中name是组的名称，pattern是需要匹配的规则。</p>
<p>前面的URLconf示例，如果使用正则表达式重写，是这样子的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, re_path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;articles/2003/&#x27;</span>, views.special_case_2003),</span><br><span class="line">    <span class="comment">#表示articles/2003/这个路径映射views模块的special_case_2003函数</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^articles/(?P&lt;year&gt;[0-9]&#123;4&#125;)/$&#x27;</span>, views.year_archive),</span><br><span class="line">    <span class="comment">#表示匹配4个0-9的任意数字</span></span><br><span class="line">    re_path(<span class="string">r&#x27;^articles/(?P&lt;year&gt;[0-9]&#123;4&#125;)/(?P&lt;month&gt;[0-9]&#123;2&#125;)/$&#x27;</span>, views.month_archive),</span><br><span class="line">    re_path(<span class="string">r&#x27;^articles/(?P&lt;year&gt;[0-9]&#123;4&#125;)/(?P&lt;month&gt;[0-9]&#123;2&#125;)/(?P&lt;slug&gt;[\w-]+)/$&#x27;</span>, views.article_detail),</span><br><span class="line">    ]</span><br><span class="line"><span class="comment">#注意:上面匹配都加了小括号，这些括号里面的值会当作参数传递到后面的视图函数中</span></span><br></pre></td></tr></table></figure>
<p>re_path与path()不同的主要在于两点：<br>1、year中匹配不到10000等非四位数字，这是正则表达式决定的<br>2、传递给视图的所有参数都是字符串类型。而不像path()方法中可以指定转换成某种类型。</p>
<h2 id="指定视图参数的默认值"><a href="#指定视图参数的默认值" class="headerlink" title="指定视图参数的默认值"></a>指定视图参数的默认值</h2><p>有一个方便的小技巧是指定视图参数的默认值。 下面是一个URLconf 和视图的示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URLconf</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;blog/&#x27;</span>, views.page),</span><br><span class="line">    path(<span class="string">&#x27;blog/page&lt;int:num&gt;/&#x27;</span>, views.page),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># View (in blog/views.py)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page</span>(<span class="params">request, num=<span class="number">1</span></span>):</span></span><br><span class="line"><span class="comment"># Output the appropriate page of blog entries, according to num.</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，两个URL模式指向同一个视图views.page —— 但是第一个模式不会从URL 中捕获任何值。如果第一个模式匹配，page() 函数将使用num参数的默认值”1”。如果第二个模式匹配，page() 将使用正则表达式捕获的num 值。</p>
<h2 id="URLconf匹配请求URL中的哪些部分"><a href="#URLconf匹配请求URL中的哪些部分" class="headerlink" title="URLconf匹配请求URL中的哪些部分"></a>URLconf匹配请求URL中的哪些部分</h2><p>请求的URL被看做是一个普通的Python字符串，URLconf在其上查找并匹配。进行匹配时将不包括GET或POST请求方式的参数以及域名。<br>例如，在<a target="_blank" rel="noopener" href="https://www.example.com/myapp/%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%AD%EF%BC%8CURLconf%E5%B0%86%E6%9F%A5%E6%89%BEmyapp/%E3%80%82">https://www.example.com/myapp/的请求中，URLconf将查找myapp/。</a><br>在<a target="_blank" rel="noopener" href="https://www.example.com/myapp/?page=3%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%AD%EF%BC%8CURLconf%E4%B9%9F%E5%B0%86%E6%9F%A5%E6%89%BEmyapp/%E3%80%82">https://www.example.com/myapp/?page=3的请求中，URLconf也将查找myapp/。</a><br>URLconf不检查使用何种HTTP请求方法，所有请求方法POST、GET、HEAD等都将路由到同一个URL的同一个视图。在视图中，才根据具体请求方法的不同，进行不同的处理。</p>
<h1 id="错误页面处理"><a href="#错误页面处理" class="headerlink" title="错误页面处理"></a>错误页面处理</h1><p>当Django找不到与请求匹配的URL时，或者当抛出一个异常时，将调用一个错误处理视图。错误视图包括400、403、404和500，分别表示请求错误、拒绝服务、页面不存在和服务器错误。它们分别位于：</p>
<ul>
<li>handler400 —— django.conf.urls.handler400。</li>
<li>handler403 —— django.conf.urls.handler403。</li>
<li>handler404 —— django.conf.urls.handler404。</li>
<li>handler500 —— django.conf.urls.handler500。</li>
</ul>
<p>这些值可以在根URLconf中设置。在其它app中的二级URLconf中设置这些变量无效。</p>
<p>Django有内置的HTML模版，用于返回错误页面给用户，但是这些403，404页面实在丑陋，通常我们都自定义错误页面。</p>
<p>首先，在根URLconf中额外增加下面的条目：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># urls.py</span></span><br><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r&#x27;^blog/$&#x27;</span>, views.page),</span><br><span class="line">    url(<span class="string">r&#x27;^blog/page(?P&lt;num&gt;[0-9]+)/$&#x27;</span>, views.page),</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 增加的条目</span></span><br><span class="line">handler400 = views.bad_request</span><br><span class="line">handler403 = views.permission_denied</span><br><span class="line">handler404 = views.page_not_found</span><br><span class="line">handler500 = views.page_error</span><br></pre></td></tr></table></figure>
<p>然后在，views.py文件中增加四个处理视图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_not_found</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;404.html&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_error</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;500.html&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">permission_denied</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;403.html&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bad_request</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;400.html&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>再根据自己的需求，在templates文件夹中创建404.html、400.html等四个页面文件，就可以了。</p>
<h1 id="urls分层模块化（路由分发）"><a href="#urls分层模块化（路由分发）" class="headerlink" title="urls分层模块化（路由分发）"></a>urls分层模块化（路由分发）</h1><p>通常，我们会在每个app里，各自创建一个urls.py路由模块，然后从根路由出发，将app所属的url请求，全部转发到相应的urls.py模块中。</p>
<p>例如，下面是Django网站本身的URLconf节选。 它包含许多其它URLconf：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># ... snip ...</span></span><br><span class="line">    path(<span class="string">&#x27;community/&#x27;</span>, include(<span class="string">&#x27;aggregator.urls&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;contact/&#x27;</span>, include(<span class="string">&#x27;contact.urls&#x27;</span>)),</span><br><span class="line">    <span class="comment"># ... snip ...</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>路由转发使用的是include()方法，需要提前导入，它的参数是转发目的地路径的字符串，路径以圆点分割。</p>
<p>注意，这个例子中的正则表达式没有包含$（字符串结束匹配符），但是包含一个末尾的斜杠。 每当Django 遇到<code>include()</code>（来自<code>django.conf.urls.include()</code>）时，它会去掉URL中匹配的部分并将剩下的字符串发送给include的URLconf做进一步处理，也就是转发到二级路由去。</p>
<p>另外一种转发其它URL模式的方式是使用一个url()实例的列表。 例如，下面的URLconf：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line"><span class="keyword">from</span> apps.main <span class="keyword">import</span> views <span class="keyword">as</span> main_views</span><br><span class="line"><span class="keyword">from</span> credit <span class="keyword">import</span> views <span class="keyword">as</span> credit_views</span><br><span class="line">extra_patterns = [</span><br><span class="line">    path(<span class="string">&#x27;reports/&#x27;</span>, credit_views.report),</span><br><span class="line">    path(<span class="string">&#x27;reports/&lt;int:id&gt;/&#x27;</span>, credit_views.report),</span><br><span class="line">    path(<span class="string">&#x27;charge/&#x27;</span>, credit_views.charge),</span><br><span class="line">]</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, main_views.homepage),</span><br><span class="line">    path(<span class="string">&#x27;help/&#x27;</span>, include(<span class="string">&#x27;apps.help.urls&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;credit/&#x27;</span>, include(extra_patterns)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>在这个例子中， /credit/reports/ URL将被 credit.views.report() 这个Django 视图处理。<br>上面这种方法可以用来去除URLconf 中的冗余，其中某个模式前缀被重复使用。例如，下面这个例子:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/history/&#x27;</span>, views.history),</span><br><span class="line">    path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/edit/&#x27;</span>, views.edit),</span><br><span class="line">    path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/discuss/&#x27;</span>, views.discuss),</span><br><span class="line">    path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/permissions/&#x27;</span>, views.permissions),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>我们可以改进它，通过只声明共同的路径前缀一次并将后面的部分分组转发:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/&#x27;</span>, include([</span><br><span class="line">        path(<span class="string">&#x27;history/&#x27;</span>, views.history),</span><br><span class="line">        path(<span class="string">&#x27;edit/&#x27;</span>, views.edit),</span><br><span class="line">        path(<span class="string">&#x27;discuss/&#x27;</span>, views.discuss),</span><br><span class="line">        path(<span class="string">&#x27;permissions/&#x27;</span>, views.permissions),</span><br><span class="line">    ])),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="捕获参数"><a href="#捕获参数" class="headerlink" title="捕获参数"></a>捕获参数</h2><p>被转发的URLconf会收到来自父URLconf捕获的所有参数，看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># In settings/urls/main.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&lt;username&gt;/blog/&#x27;</span>, include(<span class="string">&#x27;foo.urls.blog&#x27;</span>)),</span><br><span class="line">]</span><br><span class="line"><span class="comment"># In foo/urls/blog.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.blog.index),</span><br><span class="line">    path(<span class="string">&#x27;archive/&#x27;</span>, views.blog.archive),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，捕获的”username”变量将被传递给include()指向的URLconf，再进一步传递给对应的视图。</p>
<h1 id="嵌套参数"><a href="#嵌套参数" class="headerlink" title="嵌套参数"></a>嵌套参数</h1><p>正则表达式允许嵌套参数，Django将解析它们并传递给视图。当反查时，Django将尝试填满所有外围捕获的参数，并忽略嵌套捕获的参数。 考虑下面的URL模式，它带有一个可选的page参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import re_path</span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    re_path(r&#39;^blog&#x2F;(page-(\d+)&#x2F;)?$&#39;, blog_articles),   # bad</span><br><span class="line">    re_path(r&#39;^comments&#x2F;(?:page-(?P&lt;page_number&gt;\d+)&#x2F;)?$&#39;, comments),  # good]</span><br></pre></td></tr></table></figure>
<p>两个模式都使用嵌套的参数，其解析方式是：例如<code>blog/page-2/</code>将匹配<code>page-2/</code>并带有两个位置参数<code>blog_articles</code>和2。第二个comments的模式将匹配<code>page_number</code>并带有一个值为2的关键字参数<code>comments/page-2/</code>。这个例子中外围参数是一个不捕获的参数(?:…)。</p>
<p><code>blog_articles</code>视图需要最外层捕获的参数来反查，在这个例子中是comments或者没有参数，而<code>page-2/</code>可以不带参数或者用一个<code>page_number</code>值来反查。</p>
<h1 id="向视图传递额外的参数"><a href="#向视图传递额外的参数" class="headerlink" title="向视图传递额外的参数"></a>向视图传递额外的参数</h1><p>URLconfs具有一个钩子（hook），允许你传递一个Python字典作为额外的关键字参数给视图函数。</p>
<p>像这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;blog/&lt;int:year&gt;/&#x27;</span>, views.year_archive, &#123;<span class="string">&#x27;foo&#x27;</span>: <span class="string">&#x27;bar&#x27;</span>&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，对于<code>/blog/2005/</code>请求，Django将调<code>用views.year_archive(request, year=&#39;2005&#39;, foo=&#39;bar&#39;)</code>。理论上，你可以在这个字典里传递任何你想要的传递的东西。但是要注意，URL模式捕获的命名关键字参数和在字典中传递的额外参数有可能具有相同的名称，这会发生冲突，要避免。</p>
<h1 id="传递额外的参数给include"><a href="#传递额外的参数给include" class="headerlink" title="传递额外的参数给include()"></a>传递额外的参数给include()</h1><p>类似上面，也可以传递额外的参数给include()。参数会传递给include指向的urlconf中的每一行。</p>
<p>例如，下面两种URLconf配置方式在功能上完全相同：</p>
<p>配置一：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;blog/&#x27;</span>, include(<span class="string">&#x27;inner&#x27;</span>), &#123;<span class="string">&#x27;blog_id&#x27;</span>: <span class="number">3</span>&#125;),</span><br><span class="line">]</span><br><span class="line"><span class="comment"># inner.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> mysite <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;archive/&#x27;</span>, views.archive),</span><br><span class="line">    path(<span class="string">&#x27;about/&#x27;</span>, views.about),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>配置二：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line"><span class="keyword">from</span> mysite <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;blog/&#x27;</span>, include(<span class="string">&#x27;inner&#x27;</span>)),</span><br><span class="line">]</span><br><span class="line"><span class="comment"># inner.py</span></span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;archive/&#x27;</span>, views.archive, &#123;<span class="string">&#x27;blog_id&#x27;</span>: <span class="number">3</span>&#125;),</span><br><span class="line">    path(<span class="string">&#x27;about/&#x27;</span>, views.about, &#123;<span class="string">&#x27;blog_id&#x27;</span>: <span class="number">3</span>&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>注意，只有当你确定被include的URLconf中的每个视图都接收你传递给它们的额外的参数时才有意义，否则其中一个以上视图不接收该参数都将导致错误异常。</p>
<h1 id="url的反向解析"><a href="#url的反向解析" class="headerlink" title="url的反向解析"></a>url的反向解析</h1><p>在实际的Django项目中，经常需要获取某条URL，为生成的内容配置URL链接。</p>
<p>比如，我要在页面上展示一列文章列表，每个条目都是个超级链接，点击就进入该文章的详细页面。</p>
<p>现在我们的urlconf是这么配置的：<code>^post/(?P\d+)</code>。</p>
<p>在前端中，这就需要为HTML的标签的href属性提供一个诸如<code>http://www.xxx.com/post/3</code>的值。其中的域名部分，Django会帮你自动添加无须关心，我们关注的是<code>post/3</code>。</p>
<p>此时，一定不能硬编码URL为<code>post/3</code>，那样费时、不可伸缩，而且容易出错。试想，如果哪天，因为某种原因，需要将urlconf中的正则改成<code>^entry/(?P\d+)</code>，为了让链接正常工作，必须修改对应的herf属性值，于是你去项目里将所有的<code>post/3</code>都改成<code>entry/3</code>吗？显然这是不行的！</p>
<p>我们需要一种安全、可靠、自适应的机制，当修改URLconf中的代码后，无需在项目源码中大范围搜索、替换失效的硬编码URL。</p>
<p>为了解决这个问题，Django提供了一种解决方案，只需在URL中提供一个name参数，并赋值一个你自定义的、好记的、直观的字符串。</p>
<p>通过这个name参数，可以反向解析URL、反向URL匹配、反向URL查询或者简单的URL反查。</p>
<p>在需要解析URL的地方，对于不同层级，Django提供了不同的工具用于URL反查：</p>
<ul>
<li>在模板语言中：使用<code>url</code>模板标签。(也就是写前端网页时）</li>
<li>在Python代码中：使用<code>reverse()</code>函数。（也就是写视图函数等情况时）</li>
<li>在更高层的与处理Django模型实例相关的代码中：使用<code>get_absolute_url()</code>方法。(也就是在模型model中)</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment">#...</span></span><br><span class="line">    path(<span class="string">&#x27;articles/&lt;int:year&gt;/&#x27;</span>, views.year_archive, name=<span class="string">&#x27;news-year-archive&#x27;</span>),</span><br><span class="line">    <span class="comment">#...</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>某一年nnnn对应的归档的URL是<code>/articles/nnnn/</code>。</p>
<p>可以在模板的代码中使用下面的方法获得它们：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;&#123;% url &#x27;news-year-archive&#x27; 2012 %&#125;&quot;&gt;2012 Archive&lt;/a&gt;</span><br><span class="line">&#123;<span class="comment"># Or with the year in a template context variable: #&#125;</span></span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&#123;% <span class="keyword">for</span> yearvar <span class="keyword">in</span> year_list %&#125;</span><br><span class="line">&lt;li&gt;&lt;a href=&quot;&#123;% url &#x27;news-year-archive&#x27; yearvar %&#125;&quot;&gt;&#123;&#123; yearvar &#125;&#125; Archive&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>在Python代码中，这样使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">redirect_to_year</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    year = <span class="number">2006</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponseRedirect(reverse(<span class="string">&#x27;news-year-archive&#x27;</span>, args=(year,)))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中，起到核心作用的是我们通过<code>name=&#39;news-year-archive&#39;</code>为那条url起了一个可以被引用的名称。</p>
</blockquote>
<p>URL名称name使用的字符串可以包含任何你喜欢的字符，但是过度的放纵有可能带来重名的冲突，比如两个不同的app，在各自的urlconf中为某一条url取了相同的name，这就会带来麻烦。为了解决这个问题，又引出了下面命名的URL模式。</p>
<p><strong>注意</strong>：</p>
<ul>
<li>在全局配置url时，include需要两个参数，arg和namespace, 当namespace不为空时，arg参数必须是一个2元组，除了urlpatterns不能为空之外，app_name也必须填写。具体参看<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wendaobiancheng/p/9109257.html">https://www.cnblogs.com/wendaobiancheng/p/9109257.html</a></li>
<li>若多个app同时有一个index路由，访问时可能达不到效果，这时我们需用到命名空间，应该这样写<code>&#123; % url &#39;namespce:name&#39;  % &#125;</code>,  其中<code>namespace</code>为主路由的名称且一定要定义。</li>
<li>如果带有参数，则写成<code>&#123; % url &#39;namespce:name&#39; value1 value2 ...  % &#125;</code></li>
<li>如果带有关键字参数，则写成<code>&#123; % url &#39;namespce:name&#39; p1=value1 p2=value2 ...  % &#125;</code></li>
</ul>
<h1 id="命名的URL模式（URL别名）"><a href="#命名的URL模式（URL别名）" class="headerlink" title="命名的URL模式（URL别名）"></a>命名的URL模式（URL别名）</h1><p>URL别名可以保证反查到唯一的URL，即使不同的app使用相同的URL名称。</p>
<p>第三方应用始终使用带命名空间的URL是一个很好的做法。</p>
<p>类似地，它还允许你在一个应用有多个实例部署的情况下反查URL。 换句话讲，因为一个应用的多个实例共享相同的命名URL，命名空间提供了一种区分这些命名URL 的方法。</p>
<p>实现命名空间的做法很简单，在urlconf文件中添加<code>app_name = &#39;polls&#39;</code>和<code>namespace=&#39;author-polls&#39;</code>这种类似的定义。</p>
<p><strong>范例</strong>：</p>
<p>以两个实例为例子：’publisher-polls’ 和’author-polls’。</p>
<p>假设我们已经在创建和显示投票时考虑了实例命名空间的问题，代码如下：</p>
<p>urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;author-polls/&#x27;</span>, include(<span class="string">&#x27;polls.urls&#x27;</span>, namespace=<span class="string">&#x27;author-polls&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;publisher-polls/&#x27;</span>, include(<span class="string">&#x27;polls.urls&#x27;</span>, namespace=<span class="string">&#x27;publisher-polls&#x27;</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>polls/urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">app_name = <span class="string">&#x27;polls&#x27;</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;&lt;int:pk&gt;/&#x27;</span>, views.DetailView.as_view(), name=<span class="string">&#x27;detail&#x27;</span>),</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>如果当前的app实例是其中的一个，例如我们正在渲染实例’author-polls’中的detail视图，’polls:index’将解析到’author-polls’实例的index视图。</p>
<p>根据以上设置，可以使用下面的查询：</p>
<p>在基于类的视图的方法中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reverse(&#39;polls:index&#39;, current_app&#x3D;self.request.resolver_match.namespace)</span><br></pre></td></tr></table></figure>
<p>和在模板中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; % url &#39;polls:index&#39; % &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果没有当前app实例，例如如果我们在站点的其它地方渲染一个页面，’polls:index’将解析到polls注册的最后一个app实例空间。 因为没有默认的实例（命名空间为’polls’的实例），将使用注册的polls 的最后一个实例。 这将是’publisher-polls’，因为它是在urlpatterns中最后一个声明的。</p>
<h1 id="URL命名空间和include的URLconf"><a href="#URL命名空间和include的URLconf" class="headerlink" title="URL命名空间和include的URLconf"></a>URL命名空间和include的URLconf</h1><p>可以通过两种方式指定include的URLconf的应用名称空间。</p>
<p><strong>第一种</strong></p>
<p>在include的URLconf模块中设置与urlpatterns属性相同级别的<code>app_name</code>属性。必须将实际模块或模块的字符串引用传递到include()，而不是urlpatterns本身的列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">polls/urls.py</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">app_name = <span class="string">&#x27;polls&#x27;</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;&lt;int:pk&gt;/&#x27;</span>, views.DetailView.as_view(), name=<span class="string">&#x27;detail&#x27;</span>),</span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line">urls.py</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;polls/&#x27;</span>, include(<span class="string">&#x27;polls.urls&#x27;</span>)),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>此时，polls.urls中定义的URL将具有应用名称空间polls。</p>
<p><strong>第二种</strong></p>
<p>include一个包含嵌套命名空间数据的对象。如果你include()一个url()实例的列表，那么该对象中包含的URL将添加到全局命名空间。 但是，你也可以include()一个2元组，其中包含：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&lt;list of path()&#x2F;re_path() instances&gt;, &lt;application namespace&gt;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rom django.urls <span class="keyword">import</span> include, path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line">polls_patterns = ([</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.IndexView.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    path(<span class="string">&#x27;&lt;int:pk&gt;/&#x27;</span>, views.DetailView.as_view(), name=<span class="string">&#x27;detail&#x27;</span>),</span><br><span class="line">], <span class="string">&#x27;polls&#x27;</span>)</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;polls/&#x27;</span>, include(polls_patterns)),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这将include指定的URL模式到给定的app命名空间。</p>
<p>可以使用include()的namespace参数指定app实例命名空间。如果未指定，则app实例命名空间默认为URLconf的app命名空间。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li>Django对于路由的介绍：<a target="_blank" rel="noopener" href="https://www.django.cn/course/show-7.html">https://www.django.cn/course/show-7.html</a></li>
</ul>
<h1 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h1><p><img src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/1lvcND.png" alt="1lvcND.png"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:kinmfer@foxmail.com">Kinmfer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kinmfer.github.io/2020/01/30/Django-05-DjangoView-01/">https://kinmfer.github.io/2020/01/30/Django-05-DjangoView-01/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://Kinmfer.github.io" target="_blank">Kinmfer's Blogs</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django/">Django</a><a class="post-meta__tags" href="/tags/Web%E6%A1%86%E6%9E%B6/">Web框架</a><a class="post-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF/">后端</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/02/01/Django-03-DjangoModel-02/"><img class="prev-cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Django-03-DjangoModel-02</div></div></a></div><div class="next-post pull-right"><a href="/2020/01/30/Django-04-DjangoTemplate/"><img class="next-cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Django-04-DjangoTemplate</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/02/01/Django-03-DjangoModel-02/" title="Django-03-DjangoModel-02"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-01</div><div class="title">Django-03-DjangoModel-02</div></div></a></div><div><a href="/2020/01/30/Django-04-DjangoTemplate/" title="Django-04-DjangoTemplate"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-01-30</div><div class="title">Django-04-DjangoTemplate</div></div></a></div><div><a href="/2020/02/02/Django-06-DjangoView-02/" title="Django-06-DjangoView-02"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-02</div><div class="title">Django-06-DjangoView-02</div></div></a></div><div><a href="/2020/03/17/Django-07-拓展-01/" title="Django-07-拓展-01"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-17</div><div class="title">Django-07-拓展-01</div></div></a></div><div><a href="/2020/03/17/Django-08-DjangoCache/" title="Django-08-DjangoCache"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-17</div><div class="title">Django-08-DjangoCache</div></div></a></div><div><a href="/2020/03/17/Django-09-中间件/" title="Django-09-中间件"><img class="cover" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-17</div><div class="title">Django-09-中间件</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Livere</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="lv-container" data-id="city" data-uid="MTAyMC81MTkzMi8yODQxMw=="></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://gitee.com/Kinmfer/BlogImages/raw/master/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kinmfer</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">91</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">47</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Kinmfer"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Kinmfer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:kinmfer@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客！</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">视图概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#url%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">url配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">配置流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96url%E8%B7%AF%E5%BE%84%E4%B8%8A%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">获取url路径上的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#url%E5%8C%B9%E9%85%8D%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.1.</span> <span class="toc-text">url匹配注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E4%BE%8B%E5%AD%90"><span class="toc-number">3.2.</span> <span class="toc-text">匹配例子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#path%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">3.3.</span> <span class="toc-text">path转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B7%AF%E5%BE%84%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">注册自定义路径转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.5.</span> <span class="toc-text">使用正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%A7%86%E5%9B%BE%E5%8F%82%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">3.6.</span> <span class="toc-text">指定视图参数的默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URLconf%E5%8C%B9%E9%85%8D%E8%AF%B7%E6%B1%82URL%E4%B8%AD%E7%9A%84%E5%93%AA%E4%BA%9B%E9%83%A8%E5%88%86"><span class="toc-number">3.7.</span> <span class="toc-text">URLconf匹配请求URL中的哪些部分</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E5%A4%84%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">错误页面处理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#urls%E5%88%86%E5%B1%82%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%88%E8%B7%AF%E7%94%B1%E5%88%86%E5%8F%91%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">urls分层模块化（路由分发）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%8F%82%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text">捕获参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%8F%82%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">嵌套参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%91%E8%A7%86%E5%9B%BE%E4%BC%A0%E9%80%92%E9%A2%9D%E5%A4%96%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">向视图传递额外的参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E9%A2%9D%E5%A4%96%E7%9A%84%E5%8F%82%E6%95%B0%E7%BB%99include"><span class="toc-number">8.</span> <span class="toc-text">传递额外的参数给include()</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#url%E7%9A%84%E5%8F%8D%E5%90%91%E8%A7%A3%E6%9E%90"><span class="toc-number">9.</span> <span class="toc-text">url的反向解析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%9A%84URL%E6%A8%A1%E5%BC%8F%EF%BC%88URL%E5%88%AB%E5%90%8D%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">命名的URL模式（URL别名）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#URL%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8Cinclude%E7%9A%84URLconf"><span class="toc-number">11.</span> <span class="toc-text">URL命名空间和include的URLconf</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">12.</span> <span class="toc-text">参考链接</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE"><span class="toc-number">13.</span> <span class="toc-text">思维导图</span></a></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/GOLANG-08-%E5%87%BD%E6%95%B0/" title="GOLANG-08-函数"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-08-函数"/></a><div class="content"><a class="title" href="/2021/01/25/GOLANG-08-%E5%87%BD%E6%95%B0/" title="GOLANG-08-函数">GOLANG-08-函数</a><time datetime="2021-01-25T14:29:39.000Z" title="发表于 2021-01-25 22:29:39">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/GOLANG-07-map/" title="GOLANG-07-map"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-07-map"/></a><div class="content"><a class="title" href="/2021/01/25/GOLANG-07-map/" title="GOLANG-07-map">GOLANG-07-map</a><time datetime="2021-01-25T14:29:25.000Z" title="发表于 2021-01-25 22:29:25">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/GOLANG-06-%E5%88%87%E7%89%87/" title="GOLANG-06-切片"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-06-切片"/></a><div class="content"><a class="title" href="/2021/01/25/GOLANG-06-%E5%88%87%E7%89%87/" title="GOLANG-06-切片">GOLANG-06-切片</a><time datetime="2021-01-25T05:06:45.000Z" title="发表于 2021-01-25 13:06:45">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/GOLANG-05-%E6%95%B0%E7%BB%84/" title="GOLANG-05-数组"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-05-数组"/></a><div class="content"><a class="title" href="/2021/01/25/GOLANG-05-%E6%95%B0%E7%BB%84/" title="GOLANG-05-数组">GOLANG-05-数组</a><time datetime="2021-01-25T05:06:32.000Z" title="发表于 2021-01-25 13:06:32">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/GOLANG-04-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="GOLANG-04-流程控制"><img src="https://gitee.com/kinmfer/BlogImages/raw/master/img/GO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GOLANG-04-流程控制"/></a><div class="content"><a class="title" href="/2021/01/25/GOLANG-04-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="GOLANG-04-流程控制">GOLANG-04-流程控制</a><time datetime="2021-01-25T05:06:17.000Z" title="发表于 2021-01-25 13:06:17">2021-01-25</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://gitee.com/Kinmfer/BlogImages/raw/master/img/django.png)"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Kinmfer</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://kinmfer.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'vSKb5nQqvUv44yjbvGjUmk3E-gzGzoHsz',
      appKey: '4TRbJGECRE8pcN777qgBXsKO',
      placeholder: '记得留下你的昵称和邮箱,可以快速收到回复哦~',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_����":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_͵Ц":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_�ټ�":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_��Į":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_��ŭ":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_�ɰ�":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_��Ѫ":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_��":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_Ż��":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_��Ц":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_���":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_ί��":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_΢Ц":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_˼��":"90cf159733e558137ed20aa04d09964436f618a1.png"},
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Valine' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="//code.tidio.co/mzqu2o1lbhle9bvhab8bexgtiyxgkheb.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script></div></body></html>